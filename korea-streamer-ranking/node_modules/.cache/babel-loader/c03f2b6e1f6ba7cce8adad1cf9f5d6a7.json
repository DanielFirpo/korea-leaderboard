{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BrowserWebSocketTransport = void 0;\n\nclass BrowserWebSocketTransport {\n  constructor(ws) {\n    this._ws = ws;\n\n    this._ws.addEventListener('message', event => {\n      if (this.onmessage) this.onmessage.call(null, event.data);\n    });\n\n    this._ws.addEventListener('close', () => {\n      if (this.onclose) this.onclose.call(null);\n    }); // Silently ignore all errors - we don't know what to do with them.\n\n\n    this._ws.addEventListener('error', () => {});\n\n    this.onmessage = null;\n    this.onclose = null;\n  }\n\n  static create(url) {\n    return new Promise((resolve, reject) => {\n      const ws = new WebSocket(url);\n      ws.addEventListener('open', () => resolve(new BrowserWebSocketTransport(ws)));\n      ws.addEventListener('error', reject);\n    });\n  }\n\n  send(message) {\n    this._ws.send(message);\n  }\n\n  close() {\n    this._ws.close();\n  }\n\n}\n\nexports.BrowserWebSocketTransport = BrowserWebSocketTransport;","map":{"version":3,"mappings":";;;;;;;AAiBA,MAAaA,yBAAb,CAAsC;EAgBpCC,YAAYC,EAAZ,EAAyB;IACvB,KAAKC,GAAL,GAAWD,EAAX;;IACA,KAAKC,GAAL,CAASC,gBAAT,CAA0B,SAA1B,EAAsCC,KAAD,IAAU;MAC7C,IAAI,KAAKC,SAAT,EAAoB,KAAKA,SAAL,CAAeC,IAAf,CAAoB,IAApB,EAA0BF,KAAK,CAACG,IAAhC;IACrB,CAFD;;IAGA,KAAKL,GAAL,CAASC,gBAAT,CAA0B,OAA1B,EAAmC,MAAK;MACtC,IAAI,KAAKK,OAAT,EAAkB,KAAKA,OAAL,CAAaF,IAAb,CAAkB,IAAlB;IACnB,CAFD,EALuB,CAQvB;;;IACA,KAAKJ,GAAL,CAASC,gBAAT,CAA0B,OAA1B,EAAmC,MAAK,CAAG,CAA3C;;IACA,KAAKE,SAAL,GAAiB,IAAjB;IACA,KAAKG,OAAL,GAAe,IAAf;EACD;;EA3BY,OAANC,MAAM,CAACC,GAAD,EAAY;IACvB,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAoB;MACrC,MAAMZ,EAAE,GAAG,IAAIa,SAAJ,CAAcJ,GAAd,CAAX;MAEAT,EAAE,CAACE,gBAAH,CAAoB,MAApB,EAA4B,MAC1BS,OAAO,CAAC,IAAIb,yBAAJ,CAA8BE,EAA9B,CAAD,CADT;MAGAA,EAAE,CAACE,gBAAH,CAAoB,OAApB,EAA6BU,MAA7B;IACD,CAPM,CAAP;EAQD;;EAoBDE,IAAI,CAACC,OAAD,EAAgB;IAClB,KAAKd,GAAL,CAASa,IAAT,CAAcC,OAAd;EACD;;EAEDC,KAAK;IACH,KAAKf,GAAL,CAASe,KAAT;EACD;;AApCmC;;AAAtCC","names":["BrowserWebSocketTransport","constructor","ws","_ws","addEventListener","event","onmessage","call","data","onclose","create","url","Promise","resolve","reject","WebSocket","send","message","close","exports"],"sources":["../../../../src/common/BrowserWebSocketTransport.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}