{"ast":null,"code":"\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.helper = exports.debugError = void 0;\n\nconst Errors_js_1 = require(\"./Errors.js\");\n\nconst Debug_js_1 = require(\"./Debug.js\");\n\nconst assert_js_1 = require(\"./assert.js\");\n\nconst environment_js_1 = require(\"../environment.js\");\n\nexports.debugError = (0, Debug_js_1.debug)('puppeteer:error');\n\nfunction getExceptionMessage(exceptionDetails) {\n  if (exceptionDetails.exception) return exceptionDetails.exception.description || exceptionDetails.exception.value;\n  let message = exceptionDetails.text;\n\n  if (exceptionDetails.stackTrace) {\n    for (const callframe of exceptionDetails.stackTrace.callFrames) {\n      const location = callframe.url + ':' + callframe.lineNumber + ':' + callframe.columnNumber;\n      const functionName = callframe.functionName || '<anonymous>';\n      message += `\\n    at ${functionName} (${location})`;\n    }\n  }\n\n  return message;\n}\n\nfunction valueFromRemoteObject(remoteObject) {\n  (0, assert_js_1.assert)(!remoteObject.objectId, 'Cannot extract value when objectId is given');\n\n  if (remoteObject.unserializableValue) {\n    if (remoteObject.type === 'bigint' && typeof BigInt !== 'undefined') return BigInt(remoteObject.unserializableValue.replace('n', ''));\n\n    switch (remoteObject.unserializableValue) {\n      case '-0':\n        return -0;\n\n      case 'NaN':\n        return NaN;\n\n      case 'Infinity':\n        return Infinity;\n\n      case '-Infinity':\n        return -Infinity;\n\n      default:\n        throw new Error('Unsupported unserializable value: ' + remoteObject.unserializableValue);\n    }\n  }\n\n  return remoteObject.value;\n}\n\nasync function releaseObject(client, remoteObject) {\n  if (!remoteObject.objectId) return;\n  await client.send('Runtime.releaseObject', {\n    objectId: remoteObject.objectId\n  }).catch(error => {\n    // Exceptions might happen in case of a page been navigated or closed.\n    // Swallow these since they are harmless and we don't leak anything in this case.\n    (0, exports.debugError)(error);\n  });\n}\n\nfunction addEventListener(emitter, eventName, handler) {\n  emitter.on(eventName, handler);\n  return {\n    emitter,\n    eventName,\n    handler\n  };\n}\n\nfunction removeEventListeners(listeners) {\n  for (const listener of listeners) listener.emitter.removeListener(listener.eventName, listener.handler);\n\n  listeners.length = 0;\n}\n\nfunction isString(obj) {\n  return typeof obj === 'string' || obj instanceof String;\n}\n\nfunction isNumber(obj) {\n  return typeof obj === 'number' || obj instanceof Number;\n}\n\nasync function waitForEvent(emitter, eventName, predicate, timeout, abortPromise) {\n  let eventTimeout;\n  let resolveCallback;\n  let rejectCallback;\n  const promise = new Promise((resolve, reject) => {\n    resolveCallback = resolve;\n    rejectCallback = reject;\n  });\n  const listener = addEventListener(emitter, eventName, async event => {\n    if (!(await predicate(event))) return;\n    resolveCallback(event);\n  });\n\n  if (timeout) {\n    eventTimeout = setTimeout(() => {\n      rejectCallback(new Errors_js_1.TimeoutError('Timeout exceeded while waiting for event'));\n    }, timeout);\n  }\n\n  function cleanup() {\n    removeEventListeners([listener]);\n    clearTimeout(eventTimeout);\n  }\n\n  const result = await Promise.race([promise, abortPromise]).then(r => {\n    cleanup();\n    return r;\n  }, error => {\n    cleanup();\n    throw error;\n  });\n  if (result instanceof Error) throw result;\n  return result;\n}\n\nfunction evaluationString(fun) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  if (isString(fun)) {\n    (0, assert_js_1.assert)(args.length === 0, 'Cannot evaluate a string with arguments');\n    return fun;\n  }\n\n  function serializeArgument(arg) {\n    if (Object.is(arg, undefined)) return 'undefined';\n    return JSON.stringify(arg);\n  }\n\n  return `(${fun})(${args.map(serializeArgument).join(',')})`;\n}\n\nfunction pageBindingInitString(type, name) {\n  function addPageBinding(type, bindingName) {\n    /* Cast window to any here as we're about to add properties to it\n     * via win[bindingName] which TypeScript doesn't like.\n     */\n    const win = window;\n    const binding = win[bindingName];\n\n    win[bindingName] = function () {\n      const me = window[bindingName];\n      let callbacks = me.callbacks;\n\n      if (!callbacks) {\n        callbacks = new Map();\n        me.callbacks = callbacks;\n      }\n\n      const seq = (me.lastSeq || 0) + 1;\n      me.lastSeq = seq;\n      const promise = new Promise((resolve, reject) => callbacks.set(seq, {\n        resolve,\n        reject\n      }));\n\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      binding(JSON.stringify({\n        type,\n        name: bindingName,\n        seq,\n        args\n      }));\n      return promise;\n    };\n  }\n\n  return evaluationString(addPageBinding, type, name);\n}\n\nfunction pageBindingDeliverResultString(name, seq, result) {\n  function deliverResult(name, seq, result) {\n    window[name].callbacks.get(seq).resolve(result);\n    window[name].callbacks.delete(seq);\n  }\n\n  return evaluationString(deliverResult, name, seq, result);\n}\n\nfunction pageBindingDeliverErrorString(name, seq, message, stack) {\n  function deliverError(name, seq, message, stack) {\n    const error = new Error(message);\n    error.stack = stack;\n    window[name].callbacks.get(seq).reject(error);\n    window[name].callbacks.delete(seq);\n  }\n\n  return evaluationString(deliverError, name, seq, message, stack);\n}\n\nfunction pageBindingDeliverErrorValueString(name, seq, value) {\n  function deliverErrorValue(name, seq, value) {\n    window[name].callbacks.get(seq).reject(value);\n    window[name].callbacks.delete(seq);\n  }\n\n  return evaluationString(deliverErrorValue, name, seq, value);\n}\n\nfunction makePredicateString(predicate, predicateQueryHandler) {\n  function checkWaitForOptions(node, waitForVisible, waitForHidden) {\n    if (!node) return waitForHidden;\n    if (!waitForVisible && !waitForHidden) return node;\n    const element = node.nodeType === Node.TEXT_NODE ? node.parentElement : node;\n    const style = window.getComputedStyle(element);\n    const isVisible = style && style.visibility !== 'hidden' && hasVisibleBoundingBox();\n    const success = waitForVisible === isVisible || waitForHidden === !isVisible;\n    return success ? node : null;\n\n    function hasVisibleBoundingBox() {\n      const rect = element.getBoundingClientRect();\n      return !!(rect.top || rect.bottom || rect.width || rect.height);\n    }\n  }\n\n  const predicateQueryHandlerDef = predicateQueryHandler ? `const predicateQueryHandler = ${predicateQueryHandler};` : '';\n  return `\n    (() => {\n      ${predicateQueryHandlerDef}\n      const checkWaitForOptions = ${checkWaitForOptions};\n      return (${predicate})(...args)\n    })() `;\n}\n\nasync function waitWithTimeout(promise, taskName, timeout) {\n  let reject;\n  const timeoutError = new Errors_js_1.TimeoutError(`waiting for ${taskName} failed: timeout ${timeout}ms exceeded`);\n  const timeoutPromise = new Promise((resolve, x) => reject = x);\n  let timeoutTimer = null;\n  if (timeout) timeoutTimer = setTimeout(() => reject(timeoutError), timeout);\n\n  try {\n    return await Promise.race([promise, timeoutPromise]);\n  } finally {\n    if (timeoutTimer) clearTimeout(timeoutTimer);\n  }\n}\n\nasync function getReadableAsBuffer(readable, path) {\n  if (!environment_js_1.isNode && path) {\n    throw new Error('Cannot write to a path outside of Node.js environment.');\n  }\n\n  const fs = environment_js_1.isNode ? await importFSModule() : null;\n  let fileHandle;\n\n  if (path && fs) {\n    fileHandle = await fs.promises.open(path, 'w');\n  }\n\n  const buffers = [];\n\n  for await (const chunk of readable) {\n    buffers.push(chunk);\n\n    if (fileHandle && fs) {\n      await fs.promises.writeFile(fileHandle, chunk);\n    }\n  }\n\n  if (path && fileHandle) await fileHandle.close();\n  let resultBuffer = null;\n\n  try {\n    resultBuffer = Buffer.concat(buffers);\n  } finally {\n    return resultBuffer;\n  }\n}\n\nasync function getReadableFromProtocolStream(client, handle) {\n  // TODO:\n  // This restriction can be lifted once https://github.com/nodejs/node/pull/39062 has landed\n  if (!environment_js_1.isNode) {\n    throw new Error('Cannot create a stream outside of Node.js environment.');\n  }\n\n  const {\n    Readable\n  } = await Promise.resolve().then(() => __importStar(require('stream')));\n  let eof = false;\n  return new Readable({\n    async read(size) {\n      if (eof) {\n        return null;\n      }\n\n      const response = await client.send('IO.read', {\n        handle,\n        size\n      });\n      this.push(response.data, response.base64Encoded ? 'base64' : undefined);\n\n      if (response.eof) {\n        eof = true;\n        await client.send('IO.close', {\n          handle\n        });\n        this.push(null);\n      }\n    }\n\n  });\n}\n/**\n * Loads the Node fs promises API. Needed because on Node 10.17 and below,\n * fs.promises is experimental, and therefore not marked as enumerable. That\n * means when TypeScript compiles an `import('fs')`, its helper doesn't spot the\n * promises declaration and therefore on Node <10.17 you get an error as\n * fs.promises is undefined in compiled TypeScript land.\n *\n * See https://github.com/puppeteer/puppeteer/issues/6548 for more details.\n *\n * Once Node 10 is no longer supported (April 2021) we can remove this and use\n * `(await import('fs')).promises`.\n */\n\n\nasync function importFSModule() {\n  if (!environment_js_1.isNode) {\n    throw new Error('Cannot load the fs module API outside of Node.');\n  }\n\n  const fs = await Promise.resolve().then(() => __importStar(require('fs')));\n\n  if (fs.promises) {\n    return fs;\n  }\n\n  return fs.default;\n}\n\nexports.helper = {\n  evaluationString,\n  pageBindingInitString,\n  pageBindingDeliverResultString,\n  pageBindingDeliverErrorString,\n  pageBindingDeliverErrorValueString,\n  makePredicateString,\n  getReadableAsBuffer,\n  getReadableFromProtocolStream,\n  waitWithTimeout,\n  waitForEvent,\n  isString,\n  isNumber,\n  importFSModule,\n  addEventListener,\n  removeEventListeners,\n  valueFromRemoteObject,\n  getExceptionMessage,\n  releaseObject\n};","map":{"version":3,"mappings":"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","names":["exports","getExceptionMessage","exceptionDetails","exception","description","value","message","text","stackTrace","callframe","callFrames","location","url","lineNumber","columnNumber","functionName","valueFromRemoteObject","remoteObject","objectId","unserializableValue","type","BigInt","replace","NaN","Infinity","Error","releaseObject","client","send","catch","error","addEventListener","emitter","eventName","handler","on","removeEventListeners","listeners","listener","removeListener","length","isString","obj","String","isNumber","Number","waitForEvent","predicate","timeout","abortPromise","eventTimeout","resolveCallback","rejectCallback","promise","Promise","resolve","reject","event","setTimeout","Errors_js_1","cleanup","clearTimeout","result","race","then","r","evaluationString","fun","args","serializeArgument","arg","Object","is","undefined","JSON","stringify","map","join","pageBindingInitString","name","addPageBinding","bindingName","win","window","binding","me","callbacks","Map","seq","lastSeq","set","pageBindingDeliverResultString","deliverResult","get","delete","pageBindingDeliverErrorString","stack","deliverError","pageBindingDeliverErrorValueString","deliverErrorValue","makePredicateString","predicateQueryHandler","checkWaitForOptions","node","waitForVisible","waitForHidden","element","nodeType","Node","TEXT_NODE","parentElement","style","getComputedStyle","isVisible","visibility","hasVisibleBoundingBox","success","rect","getBoundingClientRect","top","bottom","width","height","predicateQueryHandlerDef","waitWithTimeout","taskName","timeoutError","timeoutPromise","x","timeoutTimer","getReadableAsBuffer","readable","path","environment_js_1","fs","importFSModule","fileHandle","promises","open","buffers","chunk","push","writeFile","close","resultBuffer","Buffer","concat","getReadableFromProtocolStream","handle","Readable","eof","read","size","response","data","base64Encoded","default"],"sources":["../../../../src/common/helper.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}