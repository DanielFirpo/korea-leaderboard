{"ast":null,"code":"\"use strict\";\n/**\n * Copyright 2018 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Accessibility = void 0;\n/**\n * The Accessibility class provides methods for inspecting Chromium's\n * accessibility tree. The accessibility tree is used by assistive technology\n * such as {@link https://en.wikipedia.org/wiki/Screen_reader | screen readers} or\n * {@link https://en.wikipedia.org/wiki/Switch_access | switches}.\n *\n * @remarks\n *\n * Accessibility is a very platform-specific thing. On different platforms,\n * there are different screen readers that might have wildly different output.\n *\n * Blink - Chrome's rendering engine - has a concept of \"accessibility tree\",\n * which is then translated into different platform-specific APIs. Accessibility\n * namespace gives users access to the Blink Accessibility Tree.\n *\n * Most of the accessibility tree gets filtered out when converting from Blink\n * AX Tree to Platform-specific AX-Tree or by assistive technologies themselves.\n * By default, Puppeteer tries to approximate this filtering, exposing only\n * the \"interesting\" nodes of the tree.\n *\n * @public\n */\n\nclass Accessibility {\n  /**\n   * @internal\n   */\n  constructor(client) {\n    this._client = client;\n  }\n  /**\n   * Captures the current state of the accessibility tree.\n   * The returned object represents the root accessible node of the page.\n   *\n   * @remarks\n   *\n   * **NOTE** The Chromium accessibility tree contains nodes that go unused on\n   * most platforms and by most screen readers. Puppeteer will discard them as\n   * well for an easier to process tree, unless `interestingOnly` is set to\n   * `false`.\n   *\n   * @example\n   * An example of dumping the entire accessibility tree:\n   * ```js\n   * const snapshot = await page.accessibility.snapshot();\n   * console.log(snapshot);\n   * ```\n   *\n   * @example\n   * An example of logging the focused node's name:\n   * ```js\n   * const snapshot = await page.accessibility.snapshot();\n   * const node = findFocusedNode(snapshot);\n   * console.log(node && node.name);\n   *\n   * function findFocusedNode(node) {\n   *   if (node.focused)\n   *     return node;\n   *   for (const child of node.children || []) {\n   *     const foundNode = findFocusedNode(child);\n   *     return foundNode;\n   *   }\n   *   return null;\n   * }\n   * ```\n   *\n   * @returns An AXNode object representing the snapshot.\n   *\n   */\n\n\n  async snapshot() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const {\n      interestingOnly = true,\n      root = null\n    } = options;\n    const {\n      nodes\n    } = await this._client.send('Accessibility.getFullAXTree');\n    let backendNodeId = null;\n\n    if (root) {\n      const {\n        node\n      } = await this._client.send('DOM.describeNode', {\n        objectId: root._remoteObject.objectId\n      });\n      backendNodeId = node.backendNodeId;\n    }\n\n    const defaultRoot = AXNode.createTree(nodes);\n    let needle = defaultRoot;\n\n    if (backendNodeId) {\n      needle = defaultRoot.find(node => node.payload.backendDOMNodeId === backendNodeId);\n      if (!needle) return null;\n    }\n\n    if (!interestingOnly) return this.serializeTree(needle)[0];\n    const interestingNodes = new Set();\n    this.collectInterestingNodes(interestingNodes, defaultRoot, false);\n    if (!interestingNodes.has(needle)) return null;\n    return this.serializeTree(needle, interestingNodes)[0];\n  }\n\n  serializeTree(node, interestingNodes) {\n    const children = [];\n\n    for (const child of node.children) children.push(...this.serializeTree(child, interestingNodes));\n\n    if (interestingNodes && !interestingNodes.has(node)) return children;\n    const serializedNode = node.serialize();\n    if (children.length) serializedNode.children = children;\n    return [serializedNode];\n  }\n\n  collectInterestingNodes(collection, node, insideControl) {\n    if (node.isInteresting(insideControl)) collection.add(node);\n    if (node.isLeafNode()) return;\n    insideControl = insideControl || node.isControl();\n\n    for (const child of node.children) this.collectInterestingNodes(collection, child, insideControl);\n  }\n\n}\n\nexports.Accessibility = Accessibility;\n\nclass AXNode {\n  constructor(payload) {\n    this.children = [];\n    this._richlyEditable = false;\n    this._editable = false;\n    this._focusable = false;\n    this._hidden = false;\n    this.payload = payload;\n    this._name = this.payload.name ? this.payload.name.value : '';\n    this._role = this.payload.role ? this.payload.role.value : 'Unknown';\n    this._ignored = this.payload.ignored;\n\n    for (const property of this.payload.properties || []) {\n      if (property.name === 'editable') {\n        this._richlyEditable = property.value.value === 'richtext';\n        this._editable = true;\n      }\n\n      if (property.name === 'focusable') this._focusable = property.value.value;\n      if (property.name === 'hidden') this._hidden = property.value.value;\n    }\n  }\n\n  _isPlainTextField() {\n    if (this._richlyEditable) return false;\n    if (this._editable) return true;\n    return this._role === 'textbox' || this._role === 'searchbox';\n  }\n\n  _isTextOnlyObject() {\n    const role = this._role;\n    return role === 'LineBreak' || role === 'text' || role === 'InlineTextBox';\n  }\n\n  _hasFocusableChild() {\n    if (this._cachedHasFocusableChild === undefined) {\n      this._cachedHasFocusableChild = false;\n\n      for (const child of this.children) {\n        if (child._focusable || child._hasFocusableChild()) {\n          this._cachedHasFocusableChild = true;\n          break;\n        }\n      }\n    }\n\n    return this._cachedHasFocusableChild;\n  }\n\n  find(predicate) {\n    if (predicate(this)) return this;\n\n    for (const child of this.children) {\n      const result = child.find(predicate);\n      if (result) return result;\n    }\n\n    return null;\n  }\n\n  isLeafNode() {\n    if (!this.children.length) return true; // These types of objects may have children that we use as internal\n    // implementation details, but we want to expose them as leaves to platform\n    // accessibility APIs because screen readers might be confused if they find\n    // any children.\n\n    if (this._isPlainTextField() || this._isTextOnlyObject()) return true; // Roles whose children are only presentational according to the ARIA and\n    // HTML5 Specs should be hidden from screen readers.\n    // (Note that whilst ARIA buttons can have only presentational children, HTML5\n    // buttons are allowed to have content.)\n\n    switch (this._role) {\n      case 'doc-cover':\n      case 'graphics-symbol':\n      case 'img':\n      case 'Meter':\n      case 'scrollbar':\n      case 'slider':\n      case 'separator':\n      case 'progressbar':\n        return true;\n\n      default:\n        break;\n    } // Here and below: Android heuristics\n\n\n    if (this._hasFocusableChild()) return false;\n    if (this._focusable && this._name) return true;\n    if (this._role === 'heading' && this._name) return true;\n    return false;\n  }\n\n  isControl() {\n    switch (this._role) {\n      case 'button':\n      case 'checkbox':\n      case 'ColorWell':\n      case 'combobox':\n      case 'DisclosureTriangle':\n      case 'listbox':\n      case 'menu':\n      case 'menubar':\n      case 'menuitem':\n      case 'menuitemcheckbox':\n      case 'menuitemradio':\n      case 'radio':\n      case 'scrollbar':\n      case 'searchbox':\n      case 'slider':\n      case 'spinbutton':\n      case 'switch':\n      case 'tab':\n      case 'textbox':\n      case 'tree':\n      case 'treeitem':\n        return true;\n\n      default:\n        return false;\n    }\n  }\n\n  isInteresting(insideControl) {\n    const role = this._role;\n    if (role === 'Ignored' || this._hidden || this._ignored) return false;\n    if (this._focusable || this._richlyEditable) return true; // If it's not focusable but has a control role, then it's interesting.\n\n    if (this.isControl()) return true; // A non focusable child of a control is not interesting\n\n    if (insideControl) return false;\n    return this.isLeafNode() && !!this._name;\n  }\n\n  serialize() {\n    const properties = new Map();\n\n    for (const property of this.payload.properties || []) properties.set(property.name.toLowerCase(), property.value.value);\n\n    if (this.payload.name) properties.set('name', this.payload.name.value);\n    if (this.payload.value) properties.set('value', this.payload.value.value);\n    if (this.payload.description) properties.set('description', this.payload.description.value);\n    const node = {\n      role: this._role\n    };\n    const userStringProperties = ['name', 'value', 'description', 'keyshortcuts', 'roledescription', 'valuetext'];\n\n    const getUserStringPropertyValue = key => properties.get(key);\n\n    for (const userStringProperty of userStringProperties) {\n      if (!properties.has(userStringProperty)) continue;\n      node[userStringProperty] = getUserStringPropertyValue(userStringProperty);\n    }\n\n    const booleanProperties = ['disabled', 'expanded', 'focused', 'modal', 'multiline', 'multiselectable', 'readonly', 'required', 'selected'];\n\n    const getBooleanPropertyValue = key => properties.get(key);\n\n    for (const booleanProperty of booleanProperties) {\n      // RootWebArea's treat focus differently than other nodes. They report whether\n      // their frame  has focus, not whether focus is specifically on the root\n      // node.\n      if (booleanProperty === 'focused' && this._role === 'RootWebArea') continue;\n      const value = getBooleanPropertyValue(booleanProperty);\n      if (!value) continue;\n      node[booleanProperty] = getBooleanPropertyValue(booleanProperty);\n    }\n\n    const tristateProperties = ['checked', 'pressed'];\n\n    for (const tristateProperty of tristateProperties) {\n      if (!properties.has(tristateProperty)) continue;\n      const value = properties.get(tristateProperty);\n      node[tristateProperty] = value === 'mixed' ? 'mixed' : value === 'true' ? true : false;\n    }\n\n    const numericalProperties = ['level', 'valuemax', 'valuemin'];\n\n    const getNumericalPropertyValue = key => properties.get(key);\n\n    for (const numericalProperty of numericalProperties) {\n      if (!properties.has(numericalProperty)) continue;\n      node[numericalProperty] = getNumericalPropertyValue(numericalProperty);\n    }\n\n    const tokenProperties = ['autocomplete', 'haspopup', 'invalid', 'orientation'];\n\n    const getTokenPropertyValue = key => properties.get(key);\n\n    for (const tokenProperty of tokenProperties) {\n      const value = getTokenPropertyValue(tokenProperty);\n      if (!value || value === 'false') continue;\n      node[tokenProperty] = getTokenPropertyValue(tokenProperty);\n    }\n\n    return node;\n  }\n\n  static createTree(payloads) {\n    const nodeById = new Map();\n\n    for (const payload of payloads) nodeById.set(payload.nodeId, new AXNode(payload));\n\n    for (const node of nodeById.values()) {\n      for (const childId of node.payload.childIds || []) node.children.push(nodeById.get(childId));\n    }\n\n    return nodeById.values().next().value;\n  }\n\n}","map":{"version":3,"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;AA6GA;;;;;;;;;;;;;;;;;;;;;;;AAsBA,MAAaA,aAAb,CAA0B;EAGxB;;;EAGAC,YAAYC,MAAZ,EAA8B;IAC5B,KAAKC,OAAL,GAAeD,MAAf;EACD;EAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAuCqB,MAARE,QAAQ,GACU;IAAA,IAA7BC,OAA6B,uEAAF,EAAE;IAE7B,MAAM;MAAEC,eAAe,GAAG,IAApB;MAA0BC,IAAI,GAAG;IAAjC,IAA0CF,OAAhD;IACA,MAAM;MAAEG;IAAF,IAAY,MAAM,KAAKL,OAAL,CAAaM,IAAb,CAAkB,6BAAlB,CAAxB;IACA,IAAIC,aAAa,GAAG,IAApB;;IACA,IAAIH,IAAJ,EAAU;MACR,MAAM;QAAEI;MAAF,IAAW,MAAM,KAAKR,OAAL,CAAaM,IAAb,CAAkB,kBAAlB,EAAsC;QAC3DG,QAAQ,EAAEL,IAAI,CAACM,aAAL,CAAmBD;MAD8B,CAAtC,CAAvB;MAGAF,aAAa,GAAGC,IAAI,CAACD,aAArB;IACD;;IACD,MAAMI,WAAW,GAAGC,MAAM,CAACC,UAAP,CAAkBR,KAAlB,CAApB;IACA,IAAIS,MAAM,GAAGH,WAAb;;IACA,IAAIJ,aAAJ,EAAmB;MACjBO,MAAM,GAAGH,WAAW,CAACI,IAAZ,CACNP,IAAD,IAAUA,IAAI,CAACQ,OAAL,CAAaC,gBAAb,KAAkCV,aADrC,CAAT;MAGA,IAAI,CAACO,MAAL,EAAa,OAAO,IAAP;IACd;;IACD,IAAI,CAACX,eAAL,EAAsB,OAAO,KAAKe,aAAL,CAAmBJ,MAAnB,EAA2B,CAA3B,CAAP;IAEtB,MAAMK,gBAAgB,GAAG,IAAIC,GAAJ,EAAzB;IACA,KAAKC,uBAAL,CAA6BF,gBAA7B,EAA+CR,WAA/C,EAA4D,KAA5D;IACA,IAAI,CAACQ,gBAAgB,CAACG,GAAjB,CAAqBR,MAArB,CAAL,EAAmC,OAAO,IAAP;IACnC,OAAO,KAAKI,aAAL,CAAmBJ,MAAnB,EAA2BK,gBAA3B,EAA6C,CAA7C,CAAP;EACD;;EAEOD,aAAa,CACnBV,IADmB,EAEnBW,gBAFmB,EAEW;IAE9B,MAAMI,QAAQ,GAAuB,EAArC;;IACA,KAAK,MAAMC,KAAX,IAAoBhB,IAAI,CAACe,QAAzB,EACEA,QAAQ,CAACE,IAAT,CAAc,GAAG,KAAKP,aAAL,CAAmBM,KAAnB,EAA0BL,gBAA1B,CAAjB;;IAEF,IAAIA,gBAAgB,IAAI,CAACA,gBAAgB,CAACG,GAAjB,CAAqBd,IAArB,CAAzB,EAAqD,OAAOe,QAAP;IAErD,MAAMG,cAAc,GAAGlB,IAAI,CAACmB,SAAL,EAAvB;IACA,IAAIJ,QAAQ,CAACK,MAAb,EAAqBF,cAAc,CAACH,QAAf,GAA0BA,QAA1B;IACrB,OAAO,CAACG,cAAD,CAAP;EACD;;EAEOL,uBAAuB,CAC7BQ,UAD6B,EAE7BrB,IAF6B,EAG7BsB,aAH6B,EAGP;IAEtB,IAAItB,IAAI,CAACuB,aAAL,CAAmBD,aAAnB,CAAJ,EAAuCD,UAAU,CAACG,GAAX,CAAexB,IAAf;IACvC,IAAIA,IAAI,CAACyB,UAAL,EAAJ,EAAuB;IACvBH,aAAa,GAAGA,aAAa,IAAItB,IAAI,CAAC0B,SAAL,EAAjC;;IACA,KAAK,MAAMV,KAAX,IAAoBhB,IAAI,CAACe,QAAzB,EACE,KAAKF,uBAAL,CAA6BQ,UAA7B,EAAyCL,KAAzC,EAAgDM,aAAhD;EACH;;AAtGuB;;AAA1BK;;AAyGA,MAAMvB,MAAN,CAAY;EAaVd,YAAYkB,OAAZ,EAAkD;IAX3C,gBAAqB,EAArB;IAEC,uBAAkB,KAAlB;IACA,iBAAY,KAAZ;IACA,kBAAa,KAAb;IACA,eAAU,KAAV;IAON,KAAKA,OAAL,GAAeA,OAAf;IACA,KAAKoB,KAAL,GAAa,KAAKpB,OAAL,CAAaqB,IAAb,GAAoB,KAAKrB,OAAL,CAAaqB,IAAb,CAAkBC,KAAtC,GAA8C,EAA3D;IACA,KAAKC,KAAL,GAAa,KAAKvB,OAAL,CAAawB,IAAb,GAAoB,KAAKxB,OAAL,CAAawB,IAAb,CAAkBF,KAAtC,GAA8C,SAA3D;IACA,KAAKG,QAAL,GAAgB,KAAKzB,OAAL,CAAa0B,OAA7B;;IAEA,KAAK,MAAMC,QAAX,IAAuB,KAAK3B,OAAL,CAAa4B,UAAb,IAA2B,EAAlD,EAAsD;MACpD,IAAID,QAAQ,CAACN,IAAT,KAAkB,UAAtB,EAAkC;QAChC,KAAKQ,eAAL,GAAuBF,QAAQ,CAACL,KAAT,CAAeA,KAAf,KAAyB,UAAhD;QACA,KAAKQ,SAAL,GAAiB,IAAjB;MACD;;MACD,IAAIH,QAAQ,CAACN,IAAT,KAAkB,WAAtB,EAAmC,KAAKU,UAAL,GAAkBJ,QAAQ,CAACL,KAAT,CAAeA,KAAjC;MACnC,IAAIK,QAAQ,CAACN,IAAT,KAAkB,QAAtB,EAAgC,KAAKW,OAAL,GAAeL,QAAQ,CAACL,KAAT,CAAeA,KAA9B;IACjC;EACF;;EAEOW,iBAAiB;IACvB,IAAI,KAAKJ,eAAT,EAA0B,OAAO,KAAP;IAC1B,IAAI,KAAKC,SAAT,EAAoB,OAAO,IAAP;IACpB,OAAO,KAAKP,KAAL,KAAe,SAAf,IAA4B,KAAKA,KAAL,KAAe,WAAlD;EACD;;EAEOW,iBAAiB;IACvB,MAAMV,IAAI,GAAG,KAAKD,KAAlB;IACA,OAAOC,IAAI,KAAK,WAAT,IAAwBA,IAAI,KAAK,MAAjC,IAA2CA,IAAI,KAAK,eAA3D;EACD;;EAEOW,kBAAkB;IACxB,IAAI,KAAKC,wBAAL,KAAkCC,SAAtC,EAAiD;MAC/C,KAAKD,wBAAL,GAAgC,KAAhC;;MACA,KAAK,MAAM5B,KAAX,IAAoB,KAAKD,QAAzB,EAAmC;QACjC,IAAIC,KAAK,CAACuB,UAAN,IAAoBvB,KAAK,CAAC2B,kBAAN,EAAxB,EAAoD;UAClD,KAAKC,wBAAL,GAAgC,IAAhC;UACA;QACD;MACF;IACF;;IACD,OAAO,KAAKA,wBAAZ;EACD;;EAEMrC,IAAI,CAACuC,SAAD,EAAkC;IAC3C,IAAIA,SAAS,CAAC,IAAD,CAAb,EAAqB,OAAO,IAAP;;IACrB,KAAK,MAAM9B,KAAX,IAAoB,KAAKD,QAAzB,EAAmC;MACjC,MAAMgC,MAAM,GAAG/B,KAAK,CAACT,IAAN,CAAWuC,SAAX,CAAf;MACA,IAAIC,MAAJ,EAAY,OAAOA,MAAP;IACb;;IACD,OAAO,IAAP;EACD;;EAEMtB,UAAU;IACf,IAAI,CAAC,KAAKV,QAAL,CAAcK,MAAnB,EAA2B,OAAO,IAAP,CADZ,CAGf;IACA;IACA;IACA;;IACA,IAAI,KAAKqB,iBAAL,MAA4B,KAAKC,iBAAL,EAAhC,EAA0D,OAAO,IAAP,CAP3C,CASf;IACA;IACA;IACA;;IACA,QAAQ,KAAKX,KAAb;MACE,KAAK,WAAL;MACA,KAAK,iBAAL;MACA,KAAK,KAAL;MACA,KAAK,OAAL;MACA,KAAK,WAAL;MACA,KAAK,QAAL;MACA,KAAK,WAAL;MACA,KAAK,aAAL;QACE,OAAO,IAAP;;MACF;QACE;IAXJ,CAbe,CA2Bf;;;IACA,IAAI,KAAKY,kBAAL,EAAJ,EAA+B,OAAO,KAAP;IAC/B,IAAI,KAAKJ,UAAL,IAAmB,KAAKX,KAA5B,EAAmC,OAAO,IAAP;IACnC,IAAI,KAAKG,KAAL,KAAe,SAAf,IAA4B,KAAKH,KAArC,EAA4C,OAAO,IAAP;IAC5C,OAAO,KAAP;EACD;;EAEMF,SAAS;IACd,QAAQ,KAAKK,KAAb;MACE,KAAK,QAAL;MACA,KAAK,UAAL;MACA,KAAK,WAAL;MACA,KAAK,UAAL;MACA,KAAK,oBAAL;MACA,KAAK,SAAL;MACA,KAAK,MAAL;MACA,KAAK,SAAL;MACA,KAAK,UAAL;MACA,KAAK,kBAAL;MACA,KAAK,eAAL;MACA,KAAK,OAAL;MACA,KAAK,WAAL;MACA,KAAK,WAAL;MACA,KAAK,QAAL;MACA,KAAK,YAAL;MACA,KAAK,QAAL;MACA,KAAK,KAAL;MACA,KAAK,SAAL;MACA,KAAK,MAAL;MACA,KAAK,UAAL;QACE,OAAO,IAAP;;MACF;QACE,OAAO,KAAP;IAxBJ;EA0BD;;EAEMR,aAAa,CAACD,aAAD,EAAuB;IACzC,MAAMU,IAAI,GAAG,KAAKD,KAAlB;IACA,IAAIC,IAAI,KAAK,SAAT,IAAsB,KAAKQ,OAA3B,IAAsC,KAAKP,QAA/C,EAAyD,OAAO,KAAP;IAEzD,IAAI,KAAKM,UAAL,IAAmB,KAAKF,eAA5B,EAA6C,OAAO,IAAP,CAJJ,CAMzC;;IACA,IAAI,KAAKX,SAAL,EAAJ,EAAsB,OAAO,IAAP,CAPmB,CASzC;;IACA,IAAIJ,aAAJ,EAAmB,OAAO,KAAP;IAEnB,OAAO,KAAKG,UAAL,MAAqB,CAAC,CAAC,KAAKG,KAAnC;EACD;;EAEMT,SAAS;IACd,MAAMiB,UAAU,GAAG,IAAIY,GAAJ,EAAnB;;IACA,KAAK,MAAMb,QAAX,IAAuB,KAAK3B,OAAL,CAAa4B,UAAb,IAA2B,EAAlD,EACEA,UAAU,CAACa,GAAX,CAAed,QAAQ,CAACN,IAAT,CAAcqB,WAAd,EAAf,EAA4Cf,QAAQ,CAACL,KAAT,CAAeA,KAA3D;;IACF,IAAI,KAAKtB,OAAL,CAAaqB,IAAjB,EAAuBO,UAAU,CAACa,GAAX,CAAe,MAAf,EAAuB,KAAKzC,OAAL,CAAaqB,IAAb,CAAkBC,KAAzC;IACvB,IAAI,KAAKtB,OAAL,CAAasB,KAAjB,EAAwBM,UAAU,CAACa,GAAX,CAAe,OAAf,EAAwB,KAAKzC,OAAL,CAAasB,KAAb,CAAmBA,KAA3C;IACxB,IAAI,KAAKtB,OAAL,CAAa2C,WAAjB,EACEf,UAAU,CAACa,GAAX,CAAe,aAAf,EAA8B,KAAKzC,OAAL,CAAa2C,WAAb,CAAyBrB,KAAvD;IAEF,MAAM9B,IAAI,GAAqB;MAC7BgC,IAAI,EAAE,KAAKD;IADkB,CAA/B;IAYA,MAAMqB,oBAAoB,GAAyB,CACjD,MADiD,EAEjD,OAFiD,EAGjD,aAHiD,EAIjD,cAJiD,EAKjD,iBALiD,EAMjD,WANiD,CAAnD;;IAQA,MAAMC,0BAA0B,GAAIC,GAAD,IACjClB,UAAU,CAACmB,GAAX,CAAeD,GAAf,CADF;;IAGA,KAAK,MAAME,kBAAX,IAAiCJ,oBAAjC,EAAuD;MACrD,IAAI,CAAChB,UAAU,CAACtB,GAAX,CAAe0C,kBAAf,CAAL,EAAyC;MAEzCxD,IAAI,CAACwD,kBAAD,CAAJ,GAA2BH,0BAA0B,CAACG,kBAAD,CAArD;IACD;;IAYD,MAAMC,iBAAiB,GAAsB,CAC3C,UAD2C,EAE3C,UAF2C,EAG3C,SAH2C,EAI3C,OAJ2C,EAK3C,WAL2C,EAM3C,iBAN2C,EAO3C,UAP2C,EAQ3C,UAR2C,EAS3C,UAT2C,CAA7C;;IAWA,MAAMC,uBAAuB,GAAIJ,GAAD,IAC9BlB,UAAU,CAACmB,GAAX,CAAeD,GAAf,CADF;;IAGA,KAAK,MAAMK,eAAX,IAA8BF,iBAA9B,EAAiD;MAC/C;MACA;MACA;MACA,IAAIE,eAAe,KAAK,SAApB,IAAiC,KAAK5B,KAAL,KAAe,aAApD,EACE;MACF,MAAMD,KAAK,GAAG4B,uBAAuB,CAACC,eAAD,CAArC;MACA,IAAI,CAAC7B,KAAL,EAAY;MACZ9B,IAAI,CAAC2D,eAAD,CAAJ,GAAwBD,uBAAuB,CAACC,eAAD,CAA/C;IACD;;IAGD,MAAMC,kBAAkB,GAAuB,CAAC,SAAD,EAAY,SAAZ,CAA/C;;IACA,KAAK,MAAMC,gBAAX,IAA+BD,kBAA/B,EAAmD;MACjD,IAAI,CAACxB,UAAU,CAACtB,GAAX,CAAe+C,gBAAf,CAAL,EAAuC;MACvC,MAAM/B,KAAK,GAAGM,UAAU,CAACmB,GAAX,CAAeM,gBAAf,CAAd;MACA7D,IAAI,CAAC6D,gBAAD,CAAJ,GACE/B,KAAK,KAAK,OAAV,GAAoB,OAApB,GAA8BA,KAAK,KAAK,MAAV,GAAmB,IAAnB,GAA0B,KAD1D;IAED;;IAGD,MAAMgC,mBAAmB,GAAyB,CAChD,OADgD,EAEhD,UAFgD,EAGhD,UAHgD,CAAlD;;IAKA,MAAMC,yBAAyB,GAAIT,GAAD,IAChClB,UAAU,CAACmB,GAAX,CAAeD,GAAf,CADF;;IAEA,KAAK,MAAMU,iBAAX,IAAgCF,mBAAhC,EAAqD;MACnD,IAAI,CAAC1B,UAAU,CAACtB,GAAX,CAAekD,iBAAf,CAAL,EAAwC;MACxChE,IAAI,CAACgE,iBAAD,CAAJ,GAA0BD,yBAAyB,CAACC,iBAAD,CAAnD;IACD;;IAOD,MAAMC,eAAe,GAAoB,CACvC,cADuC,EAEvC,UAFuC,EAGvC,SAHuC,EAIvC,aAJuC,CAAzC;;IAMA,MAAMC,qBAAqB,GAAIZ,GAAD,IAC5BlB,UAAU,CAACmB,GAAX,CAAeD,GAAf,CADF;;IAEA,KAAK,MAAMa,aAAX,IAA4BF,eAA5B,EAA6C;MAC3C,MAAMnC,KAAK,GAAGoC,qBAAqB,CAACC,aAAD,CAAnC;MACA,IAAI,CAACrC,KAAD,IAAUA,KAAK,KAAK,OAAxB,EAAiC;MACjC9B,IAAI,CAACmE,aAAD,CAAJ,GAAsBD,qBAAqB,CAACC,aAAD,CAA3C;IACD;;IACD,OAAOnE,IAAP;EACD;;EAEuB,OAAVK,UAAU,CAAC+D,QAAD,EAA0C;IAChE,MAAMC,QAAQ,GAAG,IAAIrB,GAAJ,EAAjB;;IACA,KAAK,MAAMxC,OAAX,IAAsB4D,QAAtB,EACEC,QAAQ,CAACpB,GAAT,CAAazC,OAAO,CAAC8D,MAArB,EAA6B,IAAIlE,MAAJ,CAAWI,OAAX,CAA7B;;IACF,KAAK,MAAMR,IAAX,IAAmBqE,QAAQ,CAACE,MAAT,EAAnB,EAAsC;MACpC,KAAK,MAAMC,OAAX,IAAsBxE,IAAI,CAACQ,OAAL,CAAaiE,QAAb,IAAyB,EAA/C,EACEzE,IAAI,CAACe,QAAL,CAAcE,IAAd,CAAmBoD,QAAQ,CAACd,GAAT,CAAaiB,OAAb,CAAnB;IACH;;IACD,OAAOH,QAAQ,CAACE,MAAT,GAAkBG,IAAlB,GAAyB5C,KAAhC;EACD;;AAzQS","names":["Accessibility","constructor","client","_client","snapshot","options","interestingOnly","root","nodes","send","backendNodeId","node","objectId","_remoteObject","defaultRoot","AXNode","createTree","needle","find","payload","backendDOMNodeId","serializeTree","interestingNodes","Set","collectInterestingNodes","has","children","child","push","serializedNode","serialize","length","collection","insideControl","isInteresting","add","isLeafNode","isControl","exports","_name","name","value","_role","role","_ignored","ignored","property","properties","_richlyEditable","_editable","_focusable","_hidden","_isPlainTextField","_isTextOnlyObject","_hasFocusableChild","_cachedHasFocusableChild","undefined","predicate","result","Map","set","toLowerCase","description","userStringProperties","getUserStringPropertyValue","key","get","userStringProperty","booleanProperties","getBooleanPropertyValue","booleanProperty","tristateProperties","tristateProperty","numericalProperties","getNumericalPropertyValue","numericalProperty","tokenProperties","getTokenPropertyValue","tokenProperty","payloads","nodeById","nodeId","values","childId","childIds","next"],"sources":["../../../../src/common/Accessibility.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}