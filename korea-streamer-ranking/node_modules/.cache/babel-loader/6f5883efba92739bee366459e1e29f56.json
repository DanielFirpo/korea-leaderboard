{"ast":null,"code":"\"use strict\";\n/**\n * Copyright 2017 Google Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BrowserFetcher = void 0;\n\nconst os = __importStar(require(\"os\"));\n\nconst fs = __importStar(require(\"fs\"));\n\nconst path = __importStar(require(\"path\"));\n\nconst util = __importStar(require(\"util\"));\n\nconst childProcess = __importStar(require(\"child_process\"));\n\nconst https = __importStar(require(\"https\"));\n\nconst http = __importStar(require(\"http\"));\n\nconst extract_zip_1 = __importDefault(require(\"extract-zip\"));\n\nconst Debug_js_1 = require(\"../common/Debug.js\");\n\nconst util_1 = require(\"util\");\n\nconst rimraf_1 = __importDefault(require(\"rimraf\"));\n\nconst URL = __importStar(require(\"url\"));\n\nconst https_proxy_agent_1 = __importDefault(require(\"https-proxy-agent\"));\n\nconst proxy_from_env_1 = require(\"proxy-from-env\");\n\nconst assert_js_1 = require(\"../common/assert.js\");\n\nconst debugFetcher = (0, Debug_js_1.debug)('puppeteer:fetcher');\nconst downloadURLs = {\n  chrome: {\n    linux: '%s/chromium-browser-snapshots/Linux_x64/%d/%s.zip',\n    mac: '%s/chromium-browser-snapshots/Mac/%d/%s.zip',\n    win32: '%s/chromium-browser-snapshots/Win/%d/%s.zip',\n    win64: '%s/chromium-browser-snapshots/Win_x64/%d/%s.zip'\n  },\n  firefox: {\n    linux: '%s/firefox-%s.en-US.%s-x86_64.tar.bz2',\n    mac: '%s/firefox-%s.en-US.%s.dmg',\n    win32: '%s/firefox-%s.en-US.%s.zip',\n    win64: '%s/firefox-%s.en-US.%s.zip'\n  }\n};\nconst browserConfig = {\n  chrome: {\n    host: 'https://storage.googleapis.com',\n    destination: '.local-chromium'\n  },\n  firefox: {\n    host: 'https://archive.mozilla.org/pub/firefox/nightly/latest-mozilla-central',\n    destination: '.local-firefox'\n  }\n};\n\nfunction archiveName(product, platform, revision) {\n  if (product === 'chrome') {\n    if (platform === 'linux') return 'chrome-linux';\n    if (platform === 'mac') return 'chrome-mac';\n\n    if (platform === 'win32' || platform === 'win64') {\n      // Windows archive name changed at r591479.\n      return parseInt(revision, 10) > 591479 ? 'chrome-win' : 'chrome-win32';\n    }\n  } else if (product === 'firefox') {\n    return platform;\n  }\n}\n/**\n * @internal\n */\n\n\nfunction downloadURL(product, platform, host, revision) {\n  const url = util.format(downloadURLs[product][platform], host, revision, archiveName(product, platform, revision));\n  return url;\n}\n/**\n * @internal\n */\n\n\nfunction handleArm64() {\n  fs.stat('/usr/bin/chromium-browser', function (err, stats) {\n    if (stats === undefined) {\n      fs.stat('/usr/bin/chromium', function (err, stats) {\n        if (stats === undefined) {\n          console.error('The chromium binary is not available for arm64.' + '\\nIf you are on Ubuntu, you can install with: ' + '\\n\\n sudo apt install chromium\\n' + '\\n\\n sudo apt install chromium-browser\\n');\n          throw new Error();\n        }\n      });\n    }\n  });\n}\n\nconst readdirAsync = (0, util_1.promisify)(fs.readdir.bind(fs));\nconst mkdirAsync = (0, util_1.promisify)(fs.mkdir.bind(fs));\nconst unlinkAsync = (0, util_1.promisify)(fs.unlink.bind(fs));\nconst chmodAsync = (0, util_1.promisify)(fs.chmod.bind(fs));\n\nfunction existsAsync(filePath) {\n  return new Promise(resolve => {\n    fs.access(filePath, err => resolve(!err));\n  });\n}\n/**\n * BrowserFetcher can download and manage different versions of Chromium and Firefox.\n *\n * @remarks\n * BrowserFetcher operates on revision strings that specify a precise version of Chromium, e.g. `\"533271\"`. Revision strings can be obtained from {@link http://omahaproxy.appspot.com/ | omahaproxy.appspot.com}.\n * In the Firefox case, BrowserFetcher downloads Firefox Nightly and\n * operates on version numbers such as `\"75\"`.\n *\n * @example\n * An example of using BrowserFetcher to download a specific version of Chromium\n * and running Puppeteer against it:\n *\n * ```js\n * const browserFetcher = puppeteer.createBrowserFetcher();\n * const revisionInfo = await browserFetcher.download('533271');\n * const browser = await puppeteer.launch({executablePath: revisionInfo.executablePath})\n * ```\n *\n * **NOTE** BrowserFetcher is not designed to work concurrently with other\n * instances of BrowserFetcher that share the same downloads directory.\n *\n * @public\n */\n\n\nclass BrowserFetcher {\n  /**\n   * @internal\n   */\n  constructor(projectRoot) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this._product = (options.product || 'chrome').toLowerCase();\n    (0, assert_js_1.assert)(this._product === 'chrome' || this._product === 'firefox', `Unknown product: \"${options.product}\"`);\n    this._downloadsFolder = options.path || path.join(projectRoot, browserConfig[this._product].destination);\n    this._downloadHost = options.host || browserConfig[this._product].host;\n    this.setPlatform(options.platform);\n    (0, assert_js_1.assert)(downloadURLs[this._product][this._platform], 'Unsupported platform: ' + this._platform);\n  }\n\n  setPlatform(platformFromOptions) {\n    if (platformFromOptions) {\n      this._platform = platformFromOptions;\n      return;\n    }\n\n    const platform = os.platform();\n    if (platform === 'darwin') this._platform = 'mac';else if (platform === 'linux') this._platform = 'linux';else if (platform === 'win32') this._platform = os.arch() === 'x64' ? 'win64' : 'win32';else (0, assert_js_1.assert)(this._platform, 'Unsupported platform: ' + platform);\n  }\n  /**\n   * @returns Returns the current `Platform`, which is one of `mac`, `linux`,\n   * `win32` or `win64`.\n   */\n\n\n  platform() {\n    return this._platform;\n  }\n  /**\n   * @returns Returns the current `Product`, which is one of `chrome` or\n   * `firefox`.\n   */\n\n\n  product() {\n    return this._product;\n  }\n  /**\n   * @returns The download host being used.\n   */\n\n\n  host() {\n    return this._downloadHost;\n  }\n  /**\n   * Initiates a HEAD request to check if the revision is available.\n   * @remarks\n   * This method is affected by the current `product`.\n   * @param revision - The revision to check availability for.\n   * @returns A promise that resolves to `true` if the revision could be downloaded\n   * from the host.\n   */\n\n\n  canDownload(revision) {\n    const url = downloadURL(this._product, this._platform, this._downloadHost, revision);\n    return new Promise(resolve => {\n      const request = httpRequest(url, 'HEAD', response => {\n        resolve(response.statusCode === 200);\n      });\n      request.on('error', error => {\n        console.error(error);\n        resolve(false);\n      });\n    });\n  }\n  /**\n   * Initiates a GET request to download the revision from the host.\n   * @remarks\n   * This method is affected by the current `product`.\n   * @param revision - The revision to download.\n   * @param progressCallback - A function that will be called with two arguments:\n   * How many bytes have been downloaded and the total number of bytes of the download.\n   * @returns A promise with revision information when the revision is downloaded\n   * and extracted.\n   */\n\n\n  async download(revision) {\n    let progressCallback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : () => {};\n    const url = downloadURL(this._product, this._platform, this._downloadHost, revision);\n    const fileName = url.split('/').pop();\n    const archivePath = path.join(this._downloadsFolder, fileName);\n\n    const outputPath = this._getFolderPath(revision);\n\n    if (await existsAsync(outputPath)) return this.revisionInfo(revision);\n    if (!(await existsAsync(this._downloadsFolder))) await mkdirAsync(this._downloadsFolder); // Use Intel x86 builds on Apple M1 until native macOS arm64\n    // Chromium builds are available.\n\n    if (os.platform() !== 'darwin' && os.arch() === 'arm64') {\n      handleArm64();\n      return;\n    }\n\n    try {\n      await downloadFile(url, archivePath, progressCallback);\n      await install(archivePath, outputPath);\n    } finally {\n      if (await existsAsync(archivePath)) await unlinkAsync(archivePath);\n    }\n\n    const revisionInfo = this.revisionInfo(revision);\n    if (revisionInfo) await chmodAsync(revisionInfo.executablePath, 0o755);\n    return revisionInfo;\n  }\n  /**\n   * @remarks\n   * This method is affected by the current `product`.\n   * @returns A promise with a list of all revision strings (for the current `product`)\n   * available locally on disk.\n   */\n\n\n  async localRevisions() {\n    if (!(await existsAsync(this._downloadsFolder))) return [];\n    const fileNames = await readdirAsync(this._downloadsFolder);\n    return fileNames.map(fileName => parseFolderPath(this._product, fileName)).filter(entry => entry && entry.platform === this._platform).map(entry => entry.revision);\n  }\n  /**\n   * @remarks\n   * This method is affected by the current `product`.\n   * @param revision - A revision to remove for the current `product`.\n   * @returns A promise that resolves when the revision has been removes or\n   * throws if the revision has not been downloaded.\n   */\n\n\n  async remove(revision) {\n    const folderPath = this._getFolderPath(revision);\n\n    (0, assert_js_1.assert)(await existsAsync(folderPath), `Failed to remove: revision ${revision} is not downloaded`);\n    await new Promise(fulfill => (0, rimraf_1.default)(folderPath, fulfill));\n  }\n  /**\n   * @param revision - The revision to get info for.\n   * @returns The revision info for the given revision.\n   */\n\n\n  revisionInfo(revision) {\n    const folderPath = this._getFolderPath(revision);\n\n    let executablePath = '';\n\n    if (this._product === 'chrome') {\n      if (this._platform === 'mac') executablePath = path.join(folderPath, archiveName(this._product, this._platform, revision), 'Chromium.app', 'Contents', 'MacOS', 'Chromium');else if (this._platform === 'linux') executablePath = path.join(folderPath, archiveName(this._product, this._platform, revision), 'chrome');else if (this._platform === 'win32' || this._platform === 'win64') executablePath = path.join(folderPath, archiveName(this._product, this._platform, revision), 'chrome.exe');else throw new Error('Unsupported platform: ' + this._platform);\n    } else if (this._product === 'firefox') {\n      if (this._platform === 'mac') executablePath = path.join(folderPath, 'Firefox Nightly.app', 'Contents', 'MacOS', 'firefox');else if (this._platform === 'linux') executablePath = path.join(folderPath, 'firefox', 'firefox');else if (this._platform === 'win32' || this._platform === 'win64') executablePath = path.join(folderPath, 'firefox', 'firefox.exe');else throw new Error('Unsupported platform: ' + this._platform);\n    } else throw new Error('Unsupported product: ' + this._product);\n\n    const url = downloadURL(this._product, this._platform, this._downloadHost, revision);\n    const local = fs.existsSync(folderPath);\n    debugFetcher({\n      revision,\n      executablePath,\n      folderPath,\n      local,\n      url,\n      product: this._product\n    });\n    return {\n      revision,\n      executablePath,\n      folderPath,\n      local,\n      url,\n      product: this._product\n    };\n  }\n  /**\n   * @internal\n   */\n\n\n  _getFolderPath(revision) {\n    return path.resolve(this._downloadsFolder, `${this._platform}-${revision}`);\n  }\n\n}\n\nexports.BrowserFetcher = BrowserFetcher;\n\nfunction parseFolderPath(product, folderPath) {\n  const name = path.basename(folderPath);\n  const splits = name.split('-');\n  if (splits.length !== 2) return null;\n  const [platform, revision] = splits;\n  if (!downloadURLs[product][platform]) return null;\n  return {\n    product,\n    platform,\n    revision\n  };\n}\n/**\n * @internal\n */\n\n\nfunction downloadFile(url, destinationPath, progressCallback) {\n  debugFetcher(`Downloading binary from ${url}`);\n  let fulfill, reject;\n  let downloadedBytes = 0;\n  let totalBytes = 0;\n  const promise = new Promise((x, y) => {\n    fulfill = x;\n    reject = y;\n  });\n  const request = httpRequest(url, 'GET', response => {\n    if (response.statusCode !== 200) {\n      const error = new Error(`Download failed: server returned code ${response.statusCode}. URL: ${url}`); // consume response data to free up memory\n\n      response.resume();\n      reject(error);\n      return;\n    }\n\n    const file = fs.createWriteStream(destinationPath);\n    file.on('finish', () => fulfill());\n    file.on('error', error => reject(error));\n    response.pipe(file);\n    totalBytes = parseInt(\n    /** @type {string} */\n    response.headers['content-length'], 10);\n    if (progressCallback) response.on('data', onData);\n  });\n  request.on('error', error => reject(error));\n  return promise;\n\n  function onData(chunk) {\n    downloadedBytes += chunk.length;\n    progressCallback(downloadedBytes, totalBytes);\n  }\n}\n\nfunction install(archivePath, folderPath) {\n  debugFetcher(`Installing ${archivePath} to ${folderPath}`);\n  if (archivePath.endsWith('.zip')) return (0, extract_zip_1.default)(archivePath, {\n    dir: folderPath\n  });else if (archivePath.endsWith('.tar.bz2')) return extractTar(archivePath, folderPath);else if (archivePath.endsWith('.dmg')) return mkdirAsync(folderPath).then(() => installDMG(archivePath, folderPath));else throw new Error(`Unsupported archive format: ${archivePath}`);\n}\n/**\n * @internal\n */\n\n\nfunction extractTar(tarPath, folderPath) {\n  // eslint-disable-next-line @typescript-eslint/no-var-requires\n  const tar = require('tar-fs'); // eslint-disable-next-line @typescript-eslint/no-var-requires\n\n\n  const bzip = require('unbzip2-stream');\n\n  return new Promise((fulfill, reject) => {\n    const tarStream = tar.extract(folderPath);\n    tarStream.on('error', reject);\n    tarStream.on('finish', fulfill);\n    const readStream = fs.createReadStream(tarPath);\n    readStream.pipe(bzip()).pipe(tarStream);\n  });\n}\n/**\n * @internal\n */\n\n\nfunction installDMG(dmgPath, folderPath) {\n  let mountPath;\n\n  function mountAndCopy(fulfill, reject) {\n    const mountCommand = `hdiutil attach -nobrowse -noautoopen \"${dmgPath}\"`;\n    childProcess.exec(mountCommand, (err, stdout) => {\n      if (err) return reject(err);\n      const volumes = stdout.match(/\\/Volumes\\/(.*)/m);\n      if (!volumes) return reject(new Error(`Could not find volume path in ${stdout}`));\n      mountPath = volumes[0];\n      readdirAsync(mountPath).then(fileNames => {\n        const appName = fileNames.find(item => typeof item === 'string' && item.endsWith('.app'));\n        if (!appName) return reject(new Error(`Cannot find app in ${mountPath}`));\n        const copyPath = path.join(mountPath, appName);\n        debugFetcher(`Copying ${copyPath} to ${folderPath}`);\n        childProcess.exec(`cp -R \"${copyPath}\" \"${folderPath}\"`, err => {\n          if (err) reject(err);else fulfill();\n        });\n      }).catch(reject);\n    });\n  }\n\n  function unmount() {\n    if (!mountPath) return;\n    const unmountCommand = `hdiutil detach \"${mountPath}\" -quiet`;\n    debugFetcher(`Unmounting ${mountPath}`);\n    childProcess.exec(unmountCommand, err => {\n      if (err) console.error(`Error unmounting dmg: ${err}`);\n    });\n  }\n\n  return new Promise(mountAndCopy).catch(error => {\n    console.error(error);\n  }).finally(unmount);\n}\n\nfunction httpRequest(url, method, response) {\n  const urlParsed = URL.parse(url);\n  let options = { ...urlParsed,\n    method,\n    headers: {\n      Connection: 'keep-alive'\n    }\n  };\n  const proxyURL = (0, proxy_from_env_1.getProxyForUrl)(url);\n\n  if (proxyURL) {\n    if (url.startsWith('http:')) {\n      const proxy = URL.parse(proxyURL);\n      options = {\n        path: options.href,\n        host: proxy.hostname,\n        port: proxy.port\n      };\n    } else {\n      const parsedProxyURL = URL.parse(proxyURL);\n      const proxyOptions = { ...parsedProxyURL,\n        secureProxy: parsedProxyURL.protocol === 'https:'\n      };\n      options.agent = (0, https_proxy_agent_1.default)(proxyOptions);\n      options.rejectUnauthorized = false;\n    }\n  }\n\n  const requestCallback = res => {\n    if (res.statusCode >= 300 && res.statusCode < 400 && res.headers.location) httpRequest(res.headers.location, method, response);else response(res);\n  };\n\n  const request = options.protocol === 'https:' ? https.request(options, requestCallback) : http.request(options, requestCallback);\n  request.end();\n  return request;\n}","map":{"version":3,"mappings":"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","names":["debugFetcher","downloadURLs","chrome","linux","mac","win32","win64","firefox","browserConfig","host","destination","archiveName","product","platform","revision","parseInt","downloadURL","url","util","format","handleArm64","fs","stat","err","stats","undefined","console","error","Error","readdirAsync","readdir","bind","mkdirAsync","mkdir","unlinkAsync","unlink","chmodAsync","chmod","existsAsync","filePath","Promise","resolve","access","BrowserFetcher","constructor","projectRoot","options","_product","toLowerCase","_downloadsFolder","path","join","_downloadHost","setPlatform","_platform","platformFromOptions","os","arch","canDownload","request","httpRequest","response","statusCode","on","download","progressCallback","fileName","split","pop","archivePath","outputPath","_getFolderPath","revisionInfo","downloadFile","install","executablePath","localRevisions","fileNames","map","parseFolderPath","filter","entry","remove","folderPath","fulfill","local","existsSync","exports","name","basename","splits","length","destinationPath","reject","downloadedBytes","totalBytes","promise","x","y","resume","file","createWriteStream","pipe","headers","onData","chunk","endsWith","dir","extractTar","then","installDMG","tarPath","tar","require","bzip","tarStream","extract","readStream","createReadStream","dmgPath","mountPath","mountAndCopy","mountCommand","childProcess","exec","stdout","volumes","match","appName","find","item","copyPath","catch","unmount","unmountCommand","finally","method","urlParsed","URL","parse","Connection","proxyURL","startsWith","proxy","href","hostname","port","parsedProxyURL","proxyOptions","secureProxy","protocol","agent","rejectUnauthorized","requestCallback","res","location","https","http","end"],"sources":["../../../../src/node/BrowserFetcher.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}